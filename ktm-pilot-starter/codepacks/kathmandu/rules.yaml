meta:
  jurisdiction: NP-KTM
  version: 0.2.0
  language: [en, ne]
  disclaimer: "Pilot rules. Engineer review required."

rules:
  - id: ZONING-001
    title: Max building height (pilot)
    clause: "Local zoning — Section TBD"
    check: "constraints.get('maxHeight_m',0) <= 36"
    severity: ERROR

  - id: ZONING-002
    title: Front setback
    clause: "Local zoning — Section TBD"
    check: "constraints.get('setbacks_m',{}).get('front',0) >= 6"
    severity: ERROR

  - id: ZONING-003
    title: Side setback
    clause: "Local zoning — Section TBD"
    check: "constraints.get('setbacks_m',{}).get('side',0) >= 3"
    severity: WARN

  - id: ZONING-004
    title: Rear setback
    clause: "Local zoning — Section TBD"
    check: "constraints.get('setbacks_m',{}).get('rear',0) >= 6"
    severity: WARN

  - id: EGRESS-001
    title: Stairs count for mid-rise residential
    clause: "NBC Nepal — Section TBD"
    check: "int(program.get('floorsAbove',1)) >= 4"
    result: "Require ≥ 2 enclosed stairs"
    severity: ERROR

  - id: EGRESS-002
    title: Travel distance heuristic
    clause: "NBC Nepal — Section TBD"
    check: "True"
    result: "Flag if floorplate depth > 60 m"
    severity: WARN

  - id: EGRESS-003
    title: Dead-end corridor limit (heuristic)
    clause: "NBC Nepal — Section TBD"
    check: "True"
    result: "Dead-end length ≤ 6 m"
    severity: WARN

  - id: ACCESS-001
    title: Step-free entrance
    clause: "Accessibility — Section TBD"
    check: "True"
    result: "Ramp or lift at main entry"
    severity: ERROR

  - id: ACCESS-002
    title: Lift car size (residential mid-rise)
    clause: "Accessibility — Section TBD"
    check: "int(program.get('floorsAbove',1)) >= 4"
    result: "Provide wheelchair-compliant lift"
    severity: WARN

  - id: FIRE-001
    title: Shaft and riser separation
    clause: "Fire code — Section TBD"
    check: "True"
    result: "Provide rated separation for risers/shafts"
    severity: WARN

  - id: FIRE-002
    title: Refuge area per floor (heuristic)
    clause: "Fire code — Section TBD"
    check: "int(program.get('floorsAbove',1)) >= 8"
    result: "Provide refuge as per code"
    severity: WARN

  - id: STRUCT-001
    title: Seismic zone parameters loaded
    clause: "NBC Nepal — Seismic"
    check: "site.get('jurisdiction') == 'NP-KTM'"
    result: "Use Kathmandu zone factors in prelim"
    severity: INFO

  - id: STRUCT-002
    title: Drift limit placeholder
    clause: "NBC Nepal — Serviceability"
    check: "True"
    result: "Story drift ≤ H/500 (check later)"
    severity: INFO

  - id: ENERGY-001
    title: PV-ready roof area
    clause: "Energy — Section TBD"
    check: "True"
    result: "Reserve ≥ 40% clear roof"
    severity: INFO

  - id: ENERGY-002
    title: Ventilation minimums
    clause: "MEP — Ventilation"
    check: "True"
    result: "Meet ACH minimum per typology"
    severity: INFO

  - id: WATER-001
    title: Rainwater capture readiness
    clause: "Local bylaw — Section TBD"
    check: "True"
    result: "Allocate tank space"
    severity: INFO

  - id: DOCS-001
    title: Permit bundle required docs
    clause: "KMC permit checklist"
    check: "True"
    result: "Title, plans, sections, schedules, reports"
    severity: INFO

  - id: SITE-001
    title: Flood/landslide susceptibility flag (if data)
    clause: "Local hazard maps"
    check: "True"
    result: "Flag if parcel overlaps risk layer"
    severity: WARN

  - id: TRANS-001
    title: Access and parking ratio placeholder
    clause: "Traffic/parking — Section TBD"
    check: "True"
    result: "Check stall count per GFA/units"
    severity: INFO

  - id: GREEN-001
    title: Embodied carbon target (pilot)
    clause: "Sustainability — target"
    check: "True"
    result: "≤ 450 kgCO2e/m² (pilot assumption)"
    severity: INFO
